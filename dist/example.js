!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";var r;n.r(t),function(e){e[e.None=0]="None",e[e.Legato=1]="Legato",e[e.Staccato=2]="Staccato",e[e.Pianissimo=3]="Pianissimo",e[e.Piano=4]="Piano",e[e.MezzoPiano=5]="MezzoPiano",e[e.MezzoForte=6]="MezzoForte",e[e.Forte=7]="Forte",e[e.Fortissimo=8]="Fortissimo"}(r||(r={}));let s={[r.Pianissimo]:-3,[r.Piano]:-2,[r.MezzoPiano]:-1,[r.MezzoForte]:1,[r.Forte]:2,[r.Fortissimo]:3};function a(e){let t=e.length;return e[Math.floor(Math.random()*t)]}let i=function(e,t){let n=0,r=a(e.Config.durations),s=[];for(;n+r<t;){let t=a(e.Playables);if(Array.isArray(t)){let n=A.chord(t,r,...e.Config.style);s.push(n)}else{let n=A.note(t,r,...e.Config.style);s.push(n)}n+=r,r=a(e.Config.durations)}return s};let o={improvise:function(e,t){return i(e,t)},setImproviser:function(e){i=e}},c={FlatSigns:["b","@"],NoteMap:{a0:27.5,"a#0":29.1353,b0:30.8677,c1:32.7032,"c#1":34.6478,d1:36.7081,"d#1":38.8909,e1:41.2034,f1:43.6535,"f#1":46.2493,g1:48.9994,"g#1":51.9131,a1:55,"a#1":58.2705,b1:61.7354,c2:65.4064,"c#2":69.2957,d2:73.4162,"d#2":77.7817,e2:82.4069,f2:87.3071,"f#2":92.4986,g2:97.9989,"g#2":103.826,a2:110,"a#2":116.541,b2:123.471,c3:130.813,"c#3":138.591,d3:146.832,"d#3":155.563,e3:164.814,f3:174.614,"f#3":184.997,g3:195.998,"g#3":207.562,a3:220,"a#3":233.082,b3:246.942,c4:261.626,"c#4":277.183,d4:293.665,"d#4":311.127,e4:329.628,f4:349.228,"f#4":369.994,g4:391.995,"g#4":415.305,a4:440,"a#4":466.164,b4:493.883,c5:523.251,"c#5":554.365,d5:587.33,"d#5":622.254,e5:659.255,f5:698.456,"f#5":739.989,g5:783.991,"g#5":830.609,a5:880,"a#5":932.328,b5:987.767,c6:1046.5,"c#6":1108.73,d6:1174.66,"d#6":1244.51,e6:1318.51,f6:1396.91,"f#6":1479.98,g6:1567.98,"g#6":1661.22,a6:1760,"a#6":1864.66,b6:1975.53,c7:2093,"c#7":2217.46,d7:2349.32,"d#7":2489.02,e7:2637.02,f7:2793.83,"f#7":2959.96,g7:3135.96,"g#7":3322.44,a7:3520,"a#7":3729.31,b7:3951.07,c8:4186.01},Notes:["a","b","c","d","e","f","g"],SharpSigns:["#"]};let l={isTimedChord:function(e){return void 0!==e.Notes},isTimedNote:function(e){return void 0!==e.Note},Note:function(e){if(!~c.Notes.indexOf(e))throw Error(`"${e}" is not a valid note name between "a" and "g".`)},Octave:function(e){if(e=Number(e),isNaN(e))throw Error(`Invalid octave "${e}".`);if(e>8||e<0)throw Error("This octave is out of range (0 - 8) on a standard piano.")},Sign:function(e){if(!~c.FlatSigns.indexOf(e)&&!~c.SharpSigns.indexOf(e))throw Error(`Invalid sign "${e}".`)}};let u=4;function f(e){return l.Note(e),c.Notes.indexOf(e)}function h(e){let t=f(e);return t>0?c.Notes[t-1]:c.Notes[c.Notes.length-1]}let p={createNote:function(e,t,n=!1){if(!n&&c.NoteMap[e])throw Error(`\n      The note "${e}" already exists and cannot be overwritten unless\n      the 'overrideExisting' parameter is set to 'true'.`);c.NoteMap[e]=t},getFrequency:function(e){let t=c.NoteMap[e];if(t)return t;let n,r,s,a="";if(r=e[0].toLowerCase(),3===e.length)a=e[1],l.Sign(a),s=Number(e[2]),l.Octave(s);else if(2===e.length)~c.FlatSigns.indexOf(e[1])||~c.SharpSigns.indexOf(e[1])?(a=e[1],s=u):s=Number(e[1]);else{if(1!==e.length)throw Error(`Unrecognized note format "${e}".`);s=u}if(~"abdeg".indexOf(r)&&~c.FlatSigns.indexOf(a))return n=h(r)+"#"+s,c.NoteMap[n];if(~"cf".indexOf(r)&&~c.FlatSigns.indexOf(a))return n=h(r)+("c"===r?(s-1).toString():s.toString()),c.NoteMap[n];if(~"be".indexOf(r)&&~c.SharpSigns.indexOf(a))return n=function(e){let t=f(e);return t+1<c.Notes.length?c.Notes[t+1]:c.Notes[0]}(r)+("b"===r?(s+1).toString():s.toString()),c.NoteMap[n];{n=r+(a||"")+(s||"");let e=c.NoteMap[n];if(e)return e}throw Error(`The note "${e}" is unknown.`)},setOctave:function(e){l.Octave(e),u=Number(e)}};var d=new m(220.5);function m(e){e=Math.floor(e),this._array=new Float32Array(2*e),this.length=this._array.length,this.readPointer=0,this.writePointer=e-1;for(var t=0;t<this.length;t++)this._array[t]=0}m.prototype.read=function(){var e=this._array[this.readPointer%this.length];return this.readPointer++,e},m.prototype.push=function(e){this._array[this.writePointer%this.length]=e,this.writePointer++};var v=0,b=function(e){return Math.pow(10,e/20)},g=function(e){for(var t=e.inputBuffer.getChannelData(0),n=e.outputBuffer.getChannelData(0),r=b(0),s=b(0),a=0;a<t.length;++a)n[a]=s*t[a];for(var i=function(e,t,n,r){for(var s=Math.exp(-1/(r*t)),a=Math.exp(-1/(r*n)),i=new Float32Array(e.length),o=0;o<e.length;o++){var c=Math.abs(e[o]);v=v<c?c+s*(v-c):c+a*(v-c),i[o]=v}return i}(n,0,.05,44100),o=0;o<n.length;o++)d.push(n[o]),n[o]=d.read();var c;for(o=0;o<t.length;o++){var l=1*(-2-(c=i[o],20*Math.log10(c)));l=Math.min(0,l);var u=b(l);n[o]*=u*r}};let w=new AudioContext,y=w.createGain();y.gain.value=.7;let k=w.createScriptProcessor(4096,1,1);k.onaudioprocess=g,k.connect(w.destination),y.connect(k);let _=function(e,t,n){let r=w.createGain();r.gain.value=.2,t.some(e=>{let t=s[e];return!!t&&(r.gain.value+=.12*t,!0)});let a=Math.sqrt(e)/Math.sqrt(4200)*-.25+.125+.08;return a>0&&(a=Math.pow(a+1,3)-1),r.gain.value+=a,r.connect(n),r},S=function(e,t,n){let r=w.createOscillator();return r.frequency.value=e,r.type="sine",r.connect(n),r},T=function(e,t,n){let s=e.GetNodeChain(),a=n-t,i=.04,o=n;~e.Style.indexOf(r.Legato)?(i=.01,o=n):~e.Style.indexOf(r.Staccato)&&(i=.01,o=t+.15);let c=i*a,l=s.Gain.gain.value;s.Gain.gain.value=0,s.Gain.gain.setTargetAtTime(l,t,c),s.Gain.gain.setTargetAtTime(0,o-4*c,c),s.Oscillator.start(t),s.Oscillator.stop(o)};let x={Context:w,SetGain:function(e){_=e},SetOscillator:function(e){S=e},SetPlayer:function(e){T=e},SynthesizeNote:function(e,t){return{Frequency:e,GetNodeChain:function(){let n=_(e,t,y);return{Gain:n,Oscillator:S(e,t,n)}},Play:function(e,t){T(this,e,t)},Style:t}}};function N(e,t,n,r=0){let s=Math.max(t-r,0),a=Math.max(t+n-r,0);0!==a&&e.Play(s,a)}let M={play:function(e){void 0===e&&(e=x.Context.currentTime);for(let t of this._master)for(let n of t.Notes)N(n,t.WhenSeconds+e,t.DurationSeconds)}};const P=n(8);function O(e,t){let n=E(e,t);e.Song._master=e.Song._master.concat(n)}function L(e,t){return 60/t._metadata.Tempo*(e*t._metadata.TimeSignature.noteValue)}function F(e,t){let n=t._metadata.Tempo/60;return t._metadata.TimeSignature.beatsPerMeasure/n*e}function E(e,t){let n=F(e.Measure,e.Song);if(l.isTimedNote(t)){return[{Notes:[t.Note],DurationSeconds:L(t.Duration,e.Song),WhenSeconds:n}]}if(l.isTimedChord(t)){return[{Notes:t.Notes,DurationSeconds:L(t.Duration,e.Song),WhenSeconds:n}]}return t.map((a,i)=>{if(i>0&&(e.Measure+=(r=t[i-1].Duration,s=e.Song,r*(s._metadata.TimeSignature.noteValue/s._metadata.TimeSignature.beatsPerMeasure))),l.isTimedNote(a))return E(e,a);if(l.isTimedChord(a))return E(e,a);return[{Notes:[],DurationSeconds:L(a.Duration,e.Song),WhenSeconds:n}]}).reduce((e,t)=>e.concat(t),[]);var r,s}let C={GetActions:function(e,t){let n=x.Context,r=new P({context:n});r.start();let s={Measure:t,Song:e};return{callback:function(s){let a=F(t,e);r.insert(a+n.currentTime,s)},improvises:function(e,t){return function(e,t,n){O(e,o.improvise(t,n))}(s,e,t)},plays:function(e){return O(s,e)},repeats:function(e,t){return function(e,t,n){let r=[],s=E(e,t)[0];for(let t=0;t<n.times;t++){let a={Notes:s.Notes,DurationSeconds:s.DurationSeconds,WhenSeconds:s.WhenSeconds+t*L(n.every,e.Song)};r.push(a)}e.Song._master=e.Song._master.concat(r)}(s,e,t)}}}};var z=n(1);n.d(t,"blackswan",function(){return A});let A=function(e){function t(e){return C.GetActions(this,e)}function n(e,t){let n={beatsPerMeasure:e,noteValue:t};this._metadata.TimeSignature=n}function s(e){this._metadata.Tempo=e}let a={setGain:x.SetGain,setImproviser:o.setImproviser,setOscillator:x.SetOscillator,setPlayer:x.SetPlayer},i={as:r,chord:function(e,t,...n){return{Notes:e.map(e=>x.SynthesizeNote(p.getFrequency(e),n)),Duration:t}},note:function(e,t,...n){return{Duration:t,Note:x.SynthesizeNote(p.getFrequency(e),n)}},rest:function(e){return{Duration:e}},scale:function(e,t){return{Config:t||{durations:[.25],style:[]},Playables:e}},sequence:function(e){return e},settings:a,song:function(e){let r=Object(z.a)();return r.Title=e,{at:t,play:M.play,setTimeSignature:n,setTempo:s,_master:[],_metadata:r}}};return e.blackswan=i,i}(window);t.default=A},function(e,t,n){"use strict";n.d(t,"a",function(){return i});let r={beatsPerMeasure:4,noteValue:4},s=120,a="Unnamed";function i(){return{Tempo:s,TimeSignature:r,Title:a}}},function(e,t,n){"use strict";e.exports={get currentTime(){return Date.now()/1e3}}},function(e,t,n){"use strict";e.exports=function(e,t){return void 0!==e?e:t}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,o,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(a(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),i=(l=n.slice()).length,c=0;c<i;c++)l[c].apply(this,o);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function s(){this.removeListener(e,s),n||(n=!0,t.apply(this,arguments))}return s.listener=t,this.on(e,s),this},n.prototype.removeListener=function(e,t){var n,a,i,o;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(o=i;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){a=o;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(t){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var s=n(4),a=n(3),i=n(2),o=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=e||{};var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.context=a(e.context,i),r.interval=a(e.interval,.025),r.aheadTime=a(e.aheadTime,.1),r.timerAPI=a(e.timerAPI,t),r.playbackTime=r.currentTime,r._timerId=0,r._schedId=0,r._scheds=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.EventEmitter),r(n,[{key:"start",value:function(e,t){var n=this.process.bind(this);return 0===this._timerId?(this._timerId=this.timerAPI.setInterval(n,1e3*this.interval),this.emit("start"),e&&(this.insert(this.context.currentTime,e,t),n())):e&&this.insert(this.context.currentTime,e,t),this}},{key:"stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return 0!==this._timerId&&(this.timerAPI.clearInterval(this._timerId),this._timerId=0,this.emit("stop")),e&&this._scheds.splice(0),this}},{key:"insert",value:function(e,t,n){var r=++this._schedId,s={id:r,time:e,callback:t,args:n},a=this._scheds;if(0===a.length||a[a.length-1].time<=e)a.push(s);else for(var i=0,o=a.length;i<o;i++)if(e<a[i].time){a.splice(i,0,s);break}return r}},{key:"nextTick",value:function(e,t,n){return"function"==typeof e&&(n=t,t=e,e=this.playbackTime),this.insert(e+this.aheadTime,t,n)}},{key:"remove",value:function(e){var t=this._scheds;if("number"==typeof e)for(var n=0,r=t.length;n<r;n++)if(e===t[n].id){t.splice(n,1);break}return e}},{key:"removeAll",value:function(){this._scheds.splice(0)}},{key:"process",value:function(){var e=this.context.currentTime,t=e+this.aheadTime;this._process(e,t)}},{key:"_process",value:function(e,t){var n=this._scheds,r=e;for(this.playbackTime=r,this.emit("process",{playbackTime:r});n.length&&n[0].time<t;){var s=n.shift(),a=s.time,i=s.args;this.playbackTime=a,s.callback({playbackTime:a,args:i})}this.playbackTime=r,this.emit("processed",{playbackTime:r})}},{key:"state",get:function(){return 0!==this._timerId?"running":"suspended"}},{key:"currentTime",get:function(){return this.context.currentTime}},{key:"events",get:function(){return this._scheds.slice()}}]),n}();e.exports=o}).call(this,n(5))},function(e,t,n){"use strict";e.exports=n(6)},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";n.r(t);n(1);var r=n(0);r.blackswan.song("one note").at(0).plays(r.blackswan.note("c4",1));let s=r.blackswan.song("sequence"),a=r.blackswan.sequence([r.blackswan.note("c4",.25),r.blackswan.note("d4",.25),r.blackswan.note("e4",.25),r.blackswan.rest(.25),r.blackswan.note("f4",.25)]);s.at(0).plays(a);let i=r.blackswan.song("chords"),o=r.blackswan.sequence([r.blackswan.chord(["c4","e4","g4"],.25),r.blackswan.chord(["d4","f4","a4"],.25),r.blackswan.chord(["e4","g4","b4"],.25),r.blackswan.rest(.25),r.blackswan.chord(["f4","a4","c5"],.25)]);i.at(0).plays(o);let c=r.blackswan.song("repeats"),l=r.blackswan.note("c4",.25),u=r.blackswan.chord(["e4","g4"],.25);c.at(0).repeats(l,{every:.25,times:4}),c.at(.25).repeats(u,{every:.25,times:2});let f=r.blackswan.song("improvise"),h=r.blackswan.scale(["c4","e4","f4","g4","c5",["e4","g4"]],{durations:[.25,.25,.5],style:[]});f.at(0).improvises(h,4);let p=r.blackswan.song("La Cucaracha");p.setTempo(200);let d=r.blackswan.note("c4",1/8),m=d,v=m,b=r.blackswan.note("f4",3/8),g=r.blackswan.note("a4",.25),w=r.blackswan.note("f4",.25),y=r.blackswan.note("f4",1/8),k=r.blackswan.note("e4",1/8),_=k,S=r.blackswan.note("d4",1/8),T=S,x=r.blackswan.note("c4",3/8),N=r.blackswan.sequence([d,m,v,b,g,d,m,v,b,g,r.blackswan.rest(3/8),w,y,k,_,S,T,x]);p.at(0).plays(N);let M=r.blackswan.song("legato and staccato"),P=r.blackswan.sequence([r.blackswan.note("c4",.25,r.blackswan.as.Staccato),r.blackswan.note("e4",.25,r.blackswan.as.Staccato),r.blackswan.note("c4",.25,r.blackswan.as.Staccato)]),O=r.blackswan.sequence([r.blackswan.chord(["c4","f4","g4"],.25,r.blackswan.as.Legato),r.blackswan.chord(["c4","e4","g4"],.25,r.blackswan.as.Legato)]);M.at(0).plays(P),M.at(.75).plays(O);let L=r.blackswan.song("glissandos");function F(e){return["c","d","e","f","g","a","b"].map(t=>t+e)}let E=F(1).concat(F(2)).concat(F(3)),C=F(4).concat(F(5)),z=F(6).concat(F(7));function A(e){let t=[];for(let n of e)t.push(r.blackswan.note(n,3/80));return r.blackswan.sequence(t)}L.at(0).plays(A(E)),L.at(1).plays(A(C)),L.at(2).plays(A(z)),r.blackswan.song("dynamics").at(0).plays(r.blackswan.sequence([r.blackswan.note("a4",.25,r.blackswan.as.Pianissimo),r.blackswan.note("a4",.25,r.blackswan.as.Piano),r.blackswan.note("a4",.25,r.blackswan.as.MezzoPiano),r.blackswan.note("a4",.25,r.blackswan.as.MezzoForte),r.blackswan.note("a4",.25,r.blackswan.as.Forte),r.blackswan.note("a4",.25,r.blackswan.as.Fortissimo)]));let I=r.blackswan.song("strange notes");I.at(0).plays(r.blackswan.sequence([r.blackswan.note("c",.25),r.blackswan.note("c#",.25),r.blackswan.note("c@4",.25),r.blackswan.note("cb4",.25),r.blackswan.note("A5",.25),r.blackswan.note("b#",.25)]));let q=r.blackswan.song("metronome");q.setTempo(120),q.setTimeSignature(4,4),q.at(0).repeats(r.blackswan.note("a3",.25),{every:.5,times:20}),q.at(.25).repeats(r.blackswan.note("a4",.25),{every:.5,times:20}),r.blackswan.song("improvise with default settings").at(0).improvises(r.blackswan.scale(["a4","b4","c5","e5"]),4),I.play()}]);